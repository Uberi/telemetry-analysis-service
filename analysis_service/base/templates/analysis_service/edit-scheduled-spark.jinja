<button type="button" class="btn btn-lg btn-primary" data-toggle="modal" data-target="#edit-scheduled-spark-dialog" title="Edit selected scheduled Spark job">
  <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit
</button>
<div class="modal fade" id="edit-scheduled-spark-dialog" tabindex="-1" role="dialog" aria-labelledby="edit-scheduled-spark-dialog">
  <div class="modal-dialog" role="document">
    <form class="modal-content" action="/edit-scheduled-spark/" method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      {{ edit_scheduled_spark_form.job_id }}
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Edit scheduled Spark job <span class="job-name"></span></h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Job identifier</label>
          <div class="control-group">
            {{ edit_scheduled_spark_form.identifier }}
            <p class="help-block"></p>
          </div>
        </div>
        <div class="form-group">
          <label>Analysis output visibility</label>
          <div class="control-group">
            {{ edit_scheduled_spark_form.result_visibility }}
            <p class="help-block"></p>
          </div>
        </div>
        <div class="form-group">
          <label>Job cluster size</label>
          <div class="control-group">
            {{ edit_scheduled_spark_form.size }}
            <p class="help-block"></p>
          </div>
        </div>
        <div class="form-group">
          <label>Job interval</label>
          <div class="control-group">
            {{ edit_scheduled_spark_form.interval_in_hours }}
            <p class="help-block"></p>
          </div>
        </div>
        <div class="form-group">
          <label>Job timeout</label>
          <div class="control-group">
            {{ edit_scheduled_spark_form.job_timeout }}
            <p class="help-block"></p>
          </div>
        </div>
        <div class="form-group">
          <label>Job start date</label>
          <div class="control-group">
            <div class="input-group date">
              {{ edit_scheduled_spark_form.start_date }}
              <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
            </div>
            <p class="help-block"></p>
          </div>
        </div>
        <div class="form-group">
          <label>Job end date (optional)</label>
          <div class="control-group">
            <div class="input-group date">
              {{ edit_scheduled_spark_form.end_date }}
              <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
            </div>
            <p class="help-block"></p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <input type="submit" class="btn btn-primary btn-lg" value="Update" />
      </div>
    </form>
  </div>
</div>
<script type="text/javascript">
$("#edit-scheduled-spark-dialog").on("shown.bs.modal", function() {
  var selectedJobId = $("#scheduled-spark-table tr.selected td:first").text(); // the first column of the table is a hidden one containing the job ID
  var selectedJobIdentifier = $("#scheduled-spark-table tr:selected td:nth-child(2)").text(); // the second column of the table is the job identifier
  $(this).find("input[name=job_id]").val(selectedJobId); // set a hidden field of the edit form so submitting it also submits the job ID
  $(this).find(".job-name").val(selectedJobIdentifier);
})
</script>